# AI 文檔維護指南

本文檔專門為 AI 助手設計，說明在更新和維護專案文檔時應注意的事項。

> 📌 **重要提示**：所有文檔和代碼註釋應使用繁體中文作為預設語言。

## 📋 文檔結構概覽

專案包含以下主要文檔：

1. **README.md** - 主要文檔，面向使用者
   - 快速開始指南
   - 基本使用說明
   - 常見問題（簡要版）
   - 項目介紹和技術棧

2. **DOCKER_DEPLOYMENT.md** - Docker 部署詳細文檔
   - 完整的 Docker 部署說明
   - 環境變數詳細配置
   - 生產環境設定
   - 詳細的故障排除指南

3. **AI_DOCUMENTATION_GUIDE.md** - 本文檔
   - AI 維護指南
   - 文檔更新規範

4. **SITE_MAP.md** - 系統頁面地圖
   - 前端路由結構
   - 頁面功能說明
   - 組件層級關係

5. **system-refactor-plan.md** - 系統重構計劃
   - 架構改進方案
   - 重構任務清單
   - 技術債務追蹤

6. **SystemChangeVerificationGuide.md** - 系統變更驗證指南
   - 變更驗證流程
   - 測試檢查清單
   - 部署前驗證步驟

## 🎯 文檔職責劃分

### README.md 的職責

✅ **應該包含**：

- 專案簡介和核心特色
- 快速開始（Docker Compose 和本地開發）
- 基本環境變數說明（表格形式）
- 簡要的常見問題
- 項目結構
- 技術棧列表
- 安全注意事項（要點）
- API 文檔連結

❌ **不應該包含**：

- 過於詳細的故障排除步驟
- 完整的生產環境配置範例
- 詳細的資料庫管理指令
- 冗長的部署流程說明

### DOCKER_DEPLOYMENT.md 的職責

✅ **應該包含**：

- 完整的 Docker 部署流程
- 詳細的環境變數配置說明（開發 vs 生產）
- 資料庫管理（備份、還原、重置）
- 詳細的故障排除指南
- Cloudflare Tunnel 配置範例
- 生產環境最佳實踐
- 更新系統流程

❌ **不應該包含**：

- 專案功能介紹
- 技術棧詳細說明
- 本地開發的詳細步驟（除非與 Docker 相關）

## 📝 更新文檔時的檢查清單

### 1. 更新前檢查

- [ ] 確認要更新的內容屬於哪個文檔的職責範圍
- [ ] 檢查是否有相關的變更（例如：新增環境變數、變更端口、新增服務）
- [ ] 確認是否需要同時更新多個文檔

### 2. 更新內容時注意事項

#### 環境變數相關

- [ ] **必須同時更新**：
  - `.env.example` 檔案
  - `README.md` 的環境變數表格
  - `DOCKER_DEPLOYMENT.md` 的環境變數說明
  - `backend/env.example`（如果是後端變數）

- [ ] 確保變數名稱、說明、預設值、範例在所有文檔中一致
- [ ] 標註哪些是必填項，哪些是可選項
- [ ] 區分開發環境和生產環境的配置差異

#### Docker 相關

- [ ] 更新 `docker-compose.yml` 時，同步更新：
  - `README.md` 的 Docker 服務說明表格
  - `DOCKER_DEPLOYMENT.md` 的相關章節
  - 環境變數說明

- [ ] 新增服務時，更新：
  - 系統架構圖（如果有的話）
  - 服務列表和端口說明
  - 健康檢查說明

#### 端口變更

- [ ] 更新所有提到端口的地方：
  - `README.md` 的訪問應用章節
  - `DOCKER_DEPLOYMENT.md` 的端口說明
  - `docker-compose.yml` 的端口映射
  - `.env.example` 的端口配置

#### 新增功能或變更

- [ ] 更新 `README.md` 的核心特色
- [ ] 更新技術棧列表（如果新增技術）
- [ ] 更新項目結構（如果新增檔案或目錄）
- [ ] 更新系統架構圖（如果有變更）

### 3. 格式規範

#### 語言規範

- 所有文檔內容應使用繁體中文
- 代碼註釋應使用繁體中文
- 變數名和函數名可使用英文，但註釋必須使用繁體中文
- 確保用詞一致，避免混用簡體中文

#### 標題層級

- 使用一致的標題層級
- `#` 用於主標題（每個文檔只有一個）
- `##` 用於主要章節
- `###` 用於子章節
- `####` 用於更細的分類

#### 程式碼區塊

- 使用正確的語言標籤（`bash`、`env`、`yaml`、`python` 等）
- 確保程式碼範例可以實際執行
- 註解說明複雜的命令

#### 表格

- 使用 Markdown 表格格式
- 確保表格對齊
- 表格標題要清晰

#### 列表

- 使用 `-` 或 `*` 用於無序列表
- 使用數字用於有序列表
- 保持一致的縮排

#### 強調

- `**粗體**` 用於重要概念
- `*斜體*` 用於強調
- `` `程式碼` `` 用於檔案名、變數名、命令
- `> 引用` 用於提示和注意事項

### 4. 內容一致性檢查

#### 端口號碼

確保以下端口在所有文檔中一致：

- 前端：預設 3000
- 後端：預設 8000
- 資料庫：預設 5432

#### 服務名稱

確保服務名稱一致：

- `frontend`（小寫）
- `backend`（小寫）
- `postgres`（小寫）

#### 檔案路徑

- 使用相對路徑
- 路徑格式一致（使用 `/` 分隔符）
- 檔案名大小寫正確

#### 命令範例

- 確保命令可以實際執行
- 使用一致的命令格式
- 提供必要的上下文說明

### 5. 連結檢查

- [ ] 確保所有內部連結正確（`[文字](檔案.md)`）
- [ ] 確保外部連結有效
- [ ] 使用相對路徑連結內部文檔

### 6. 更新後檢查

- [ ] 閱讀整個更新的章節，確保流暢
- [ ] 檢查是否有拼寫錯誤
- [ ] 確認格式正確（標題、列表、程式碼區塊）
- [ ] 確認所有範例都可以執行
- [ ] 檢查是否有遺漏的更新點

### 7. 代碼質量檢查

- [ ] 檢查文件行數：如果文件超過 300 行，需要考慮是否需要重構
  - 評估文件是否符合單一職責原則
  - 考慮是否可以拆分為多個更小的模組
  - 評估可讀性和可維護性
- [ ] 確保代碼遵循專案規範
- [ ] 檢查是否有重複代碼可以提取

## 🔄 常見更新場景

### 場景 1：新增環境變數

**步驟**：

1. 更新 `.env.example` 和 `backend/env.example`
2. 更新 `README.md` 的環境變數表格
3. 更新 `DOCKER_DEPLOYMENT.md` 的環境變數說明
4. 更新 `docker-compose.yml`（如果需要）
5. 在相關章節加入說明

### 場景 2：變更端口

**步驟**：

1. 更新 `docker-compose.yml` 的端口映射
2. 更新 `.env.example` 的端口配置
3. 更新 `README.md` 的訪問應用章節
4. 更新 `DOCKER_DEPLOYMENT.md` 的端口說明
5. 更新所有提到該端口的地方

### 場景 3：新增 Docker 服務

**步驟**：

1. 更新 `docker-compose.yml`
2. 更新 `README.md` 的 Docker 服務說明表格
3. 更新 `DOCKER_DEPLOYMENT.md` 的服務說明
4. 更新系統架構圖（如果有）
5. 更新環境變數說明

### 場景 4：更新部署流程

**步驟**：

1. 主要更新 `DOCKER_DEPLOYMENT.md`
2. 如果影響快速開始，同步更新 `README.md`
3. 確保命令範例正確
4. 更新相關的故障排除說明

## ⚠️ 常見錯誤避免

### ❌ 錯誤 1：重複內容

**問題**：在 `README.md` 和 `DOCKER_DEPLOYMENT.md` 中重複相同的詳細內容

**解決**：

- `README.md` 提供簡要說明和連結
- `DOCKER_DEPLOYMENT.md` 提供詳細說明

### ❌ 錯誤 2：不一致的資訊

**問題**：不同文檔中同一資訊不一致

**解決**：

- 使用檢查清單確保一致性
- 更新時同時檢查所有相關文檔

### ❌ 錯誤 3：過時的範例

**問題**：程式碼範例無法執行或已過時

**解決**：

- 定期測試範例
- 更新時驗證範例的正確性

### ❌ 錯誤 4：遺漏更新

**問題**：只更新了一個文檔，忘記更新其他相關文檔

**解決**：

- 使用檢查清單
- 系統性地檢查所有相關位置

### ❌ 錯誤 5：格式不一致

**問題**：不同章節使用不同的格式風格

**解決**：

- 遵循本文檔的格式規範
- 參考現有文檔的風格

### ❌ 錯誤 6：文件過長

**問題**：文件超過 300 行，影響可讀性和可維護性

**解決**：

- 檢查文件是否違反單一職責原則
- 考慮將文件拆分為多個更小的模組
- 提取重複代碼為共用函數或組件
- 評估是否可以將部分邏輯移到獨立的服務或工具類中

## 📚 參考範例

### 環境變數表格格式

```markdown
| 變數名稱        | 說明     | 預設值    | 範例            |
| --------------- | -------- | --------- | --------------- |
| `VARIABLE_NAME` | 變數說明 | `default` | `example-value` |
```

### 命令範例格式

````markdown
```bash
# 命令說明
command --option value
```
````

````

### 提示框格式

```markdown
> 💡 **提示**：提示內容

> ⚠️ **警告**：警告內容

> 📖 **詳細說明**：請參考 [連結](檔案.md)
````

## 🎯 更新優先級

當需要更新多個文檔時，建議的更新順序：

1. **`.env.example` 和 `backend/env.example`** - 環境變數範例檔案
2. **`docker-compose.yml`** - 配置檔案
3. **`DOCKER_DEPLOYMENT.md`** - 詳細文檔
4. **`README.md`** - 主要文檔（簡要更新）

## ✅ 最終檢查

更新完成後，請確認：

- [ ] 所有相關文檔都已更新
- [ ] 資訊一致性（端口、服務名、路徑等）
- [ ] 格式正確（標題、列表、表格、程式碼區塊）
- [ ] 連結有效
- [ ] 範例可執行
- [ ] 沒有拼寫錯誤
- [ ] 文檔流暢易讀

## 📝 備註

- 本文檔應該與專案文檔一起維護
- 如果發現新的更新模式或常見錯誤，請更新本文檔
- 保持本文檔的實用性和準確性

---

**最後更新**：2026-01-05
**維護者**：AI Assistant
